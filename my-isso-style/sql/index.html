<!doctype html><html lang=en><title>Inside The Isso Database - Simputer Archives</title><meta charset=utf-8><link rel=canonical href=https://archives.snorl.ax/my-isso-style/sql/><link href=https://archives.snorl.ax/theme/css/all.css rel=stylesheet><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Luckiest+Guy|Rajdhani:600|Rajdhani:700&amp;display=swap"><link href=https://archives.snorl.ax/theme/images/icon.png rel=icon><link href=https://archives.snorl.ax/theme/images/icon-apple.png rel=apple-touch-icon-precomposed><link href=https://archives.snorl.ax/feeds/all.xml rel=alternate title="Simputer Archives RSS Feed" type=application/rss+xml><meta content="width=device-width" name=viewport><div id=a><header id=c><div id=d><h1 id=e><a href=https://archives.snorl.ax/>Simputer Archives</a></h1></div></header><div id=f><nav id=h><ul><li><a href=https://archives.snorl.ax/>Home</a><li><a href=https://archives.snorl.ax/browser/>Browser</a><li><a href=https://archives.snorl.ax/terminal/>Terminal</a><li><a href=https://archives.snorl.ax/tags/>Tags</a></ul></nav><nav id=r><a href=https://www.youtube.com/channel/UCnqOLMtPJaqa7e_6FhZ8-rw title=Youtube><svg id="youtube"/></a><a href=https://github.com/SnorlaxYum/ title=Github><svg id="github"/></a><a href=https://twitter.com/Snorl_ax title=Twitter><svg id="twitter"/></a><a href=https://archives.snorl.ax/feeds/all.xml title=RSS><svg id="rss"/></a><a href=mailto:sim@snorl.ax title=Email><svg id="mail"/></a></nav><aside id=j><form action=https://archives.snorl.ax/search.html onsubmit="return validateForm(this.elements['q'].value);"><input placeholder=Search... name=q id=tipue_search_input></form></aside></div></div><div id=b><main id=k><article id=m><header id=o><h2 id=p>Inside The Isso Database</h2></header><div id=n><div id=series><p>This post is a part of "<b>My Isso Style</b>" Series.<ol class=parts><li><a href=https://archives.snorl.ax/drafts/start-to-use-isso.html>Installation</a><li><a href=https://archives.snorl.ax/my-isso-style/config/>Configuration</a><li id=i><a>Inside the Database</a></ol></div><h2 id=toctable>Table Of Contents</h2><div class=toc><ul><li><a href=#the-tables>The Tables</a><li><a href=#ex-1-delete-comments>Ex 1: Delete Comments</a><li><a href=#ex-2-approve-comments>Ex 2: Approve Comments</a><li><a href=#ex-3-delete-and-update-threads>Ex 3: Delete And Update Threads</a></ul></div><h2 id=the-tables><a class=toclink href=#the-tables>The Tables</a></h2><p>Remember the time when the admin interface was not a feature in isso, I submitted two issues in Github: <a href=https://github.com/posativ/isso/issues/264 target=_blank>#264</a>, <a href=https://github.com/posativ/isso/issues/270 target=_blank>#270</a>.<br>Now looking back, I think that more and more questions alike could be there without a knowledge for the very database file we r using. Thus it's really important to get into it<sup id=fnref:1><a class=footnote-ref href=#fn:1 rel=footnote>1</a></sup>.<br>Switch to a user with enough permission to the sqlite databse file and get into the directory where there's database file:<div class=highlight><pre><span class=code-line><span></span>$ su isso</span>
<span class=code-line>$ <span class=nb>cd</span> ~</span>
</pre></div><p>It's recommended to backup the database before editing:<div class=highlight><pre><span class=code-line><span></span>$ cp comments.db comments.db.bak</span>
</pre></div><p>Now launch the sqlite3 utility.<div class=highlight><pre><span class=code-line><span></span>$ sqlite3</span>
</pre></div><p>Turn the headers on and attach the database to the variable for editing.<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=p>.</span><span class=n>headers</span> <span class=k>ON</span></span>
<span class=code-line><span class=gp>sqlite&gt; </span><span class=n>ATTACH</span> <span class=s1>&#39;comments.db&#39;</span> <span class=k>AS</span> <span class=n>isso</span><span class=p>;</span></span>
</pre></div><p>List the tables.<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=p>.</span><span class=n>tables</span></span>
</pre></div><p>The output are three self-explaining table names:<div class=highlight><pre><span class=code-line><span></span>isso.comments     isso.preferences  isso.threads</span>
</pre></div><p>Check the contents in <code>isso.comments</code>:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span><span class=p>;</span></span>
</pre></div><p>Take a glimpse of a part of them:<div class=highlight><pre><span class=code-line><span></span>tid|id|parent|created|modified|mode|remote_addr|text|author|email|website|likes|dislikes|voters|notification</span>
<span class=code-line>1|1||1469977655.38995|1469977994.84019|1|104.86.45.0|Goodbye Disqus!  </span>
<span class=code-line>Hello __ISSO__!  </span>
<span class=code-line>It&#39;s really amazing and I could use __MarkDown__ to comment!  </span>
<span class=code-line>__I&#39;m So GLAD To Become an _ISSO USER_!__  </span>
<span class=code-line>BTW, much faster than Disqus!|Sim|sim@snorl.ax||2|0||0</span>
</pre></div><p>It's a comment table with columns named <code>tid</code>, <code>id</code>, <code>parent</code>, <code>created</code>, <code>modified</code>, <code>mode</code>, <code>remote_addr</code>, <code>text</code>, <code>author</code>, <code>email</code>, <code>website</code>, <code>likes</code>, <code>dislikes</code>, <code>voters</code>, <code>notification</code>.<ul><li><code>tid</code>: The id of the thread the comment belongs to.<li><code>id</code>: The id of the comment.<li><code>parent</code>: If the comment is meant to reply to a comment, then the comment has the id of the comment it's meant to reply to.<li><code>created</code>: The time when the comment is created. Stored in Unix Time format.<li><code>modified</code>: The time when the comment is modified. Stored in Unix Time format.<li><code>mode</code>: 1 if the comment is published. 2 if the comment is waiting for approval.<li><code>remote_addr</code>: The IP address of the commenter.<li><code>text</code>: The content of the comment.<li><code>author</code>: The name of the user. Blank if the user didn't fill in the field.<li><code>email</code>: The email of the user. Blank if the user didn't fill in the field.<li><code>website</code>: The url of the website of the user. Blank if the user didn't fill in the field.<li><code>likes</code>: Likes the comment has received so far.<li><code>dislikes</code>: Dislikes the comment has received so far.<li><code>voters</code>: The number of voters of the comments.<li><code>notification</code>: 1 if the author chose to receive reply notification.</ul><p>Check the contents in <code>isso.preferences</code>:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>preferences</span><span class=p>;</span></span>
</pre></div><p>Take a glimpse of it:<div class=highlight><pre><span class=code-line><span></span>key|value</span>
<span class=code-line>session-key|s0394578gjhsa23sadjhg23asxcnjk423xjzg2131xzmjhde</span>
</pre></div><p>It's table with a session key. I haven't done anything with it. It might be not much useful in sqlite editing.<p>Check the contents in <code>isso.threads</code>:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span><span class=p>;</span></span>
</pre></div><p>Take a glimpse of a part of them:<div class=highlight><pre><span class=code-line><span></span>id|uri|title</span>
<span class=code-line>1|/terminal/2016/07/12/start-to-use-isso/|Tried ISSO and......</span>
<span class=code-line>7|/terminal/2016/05/27/make-full-use-of-cloudflare/|Make full use of CloudFlare</span>
<span class=code-line>9|/browser/2016/06/04/panic-at-the-disco-bohemian-rhapsody/|Panic! At The Disco - Bohemian Rhapsody</span>
</pre></div><p>It's a thread table with columns named <code>id</code>, <code>uri</code> and <code>title</code>.<ul><li><code>id</code>: The id of the thread.<li><code>uri</code>: The URL of the page the thread serves to.<li><code>title</code>: The title of the thread, used in the title of email notification of the thread.</ul><p>The following examples might help.<h2 id=ex-1-delete-comments><a class=toclink href=#ex-1-delete-comments>Ex 1: Delete Comments</a></h2><p>In the examples above, the contents in <code>isso.comments</code> was checked:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span><span class=p>;</span></span>
</pre></div><p>Take a glimpse of a part of them:<div class=highlight><pre><span class=code-line><span></span>tid|id|parent|created|modified|mode|remote_addr|text|author|email|website|likes|dislikes|voters|notification</span>
<span class=code-line>1|1||1469977655.38995|1469977994.84019|1|104.86.45.0|Goodbye Disqus!  </span>
<span class=code-line>Hello __ISSO__!  </span>
<span class=code-line>It&#39;s really amazing and I could use __MarkDown__ to comment!  </span>
<span class=code-line>__I&#39;m So GLAD To Become an _ISSO USER_!__  </span>
<span class=code-line>BTW, much faster than Disqus!|Sim|sim@snorl.ax||2|0||0</span>
<span class=code-line>7|2||1470373481.55917||1|54.210.166.0|nice blog i like it||||0|0||0</span>
</pre></div><p>Suppose I'm gonna delete the first comment in the table, that's all I have to do:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span></span>
</pre></div><p>To deal similar things with the author Sim, check with care first, to simplify the thngs, only show the column I need:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=n>id</span><span class=p>,</span> <span class=n>author</span><span class=p>,</span> <span class=nb>text</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>author</span><span class=o>=</span><span class=s1>&#39;Sim&#39;</span><span class=p>;</span></span>
</pre></div><p>A part of the output:<div class=highlight><pre><span class=code-line><span></span>id|author|text</span>
<span class=code-line>8|Sim|<span class=nt>&lt;p&gt;</span>It depends.If u prefer a FBI icon,just do it!<span class=nt>&lt;/p&gt;</span></span>
<span class=code-line>12|Sim|<span class=nt>&lt;p&gt;</span>It&#39;s not easy to keep balanced diet<span class=nt>&lt;/p&gt;</span></span>
</pre></div><p>To delete the first comment of the table:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>8</span><span class=p>;</span></span>
</pre></div><p>To delete all of Sim's comments:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>author</span><span class=o>=</span><span class=s1>&#39;Sim&#39;</span><span class=p>;</span></span>
</pre></div><p>To delete all of Anonymous user's comments:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>author</span> <span class=k>IS</span> <span class=k>NULL</span><span class=p>;</span></span>
</pre></div><p>To delete the comments whose <code>id</code> are between 1 and 7 (1 and 7 included):<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>&gt;=</span><span class=mi>1</span> <span class=k>AND</span> <span class=n>id</span><span class=o>&lt;=</span><span class=mi>7</span><span class=p>;</span></span>
</pre></div><p>To delete the comment of which <code>id</code> is 1 or 7:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>==</span><span class=mi>1</span> <span class=k>AND</span> <span class=n>id</span><span class=o>==</span><span class=mi>7</span><span class=p>;</span></span>
</pre></div><h2 id=ex-2-approve-comments><a class=toclink href=#ex-2-approve-comments>Ex 2: Approve Comments</a></h2><p>This can be useful when u r not able to receive the moderation link via email.<br>To check all the comments under approval in sqlite:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=n>id</span><span class=p>,</span><span class=n>author</span><span class=p>,</span><span class=nb>text</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=k>mode</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span></span>
</pre></div><p>The output:<div class=highlight><pre><span class=code-line><span></span>id|author|text</span>
<span class=code-line>72|Sim|Test</span>
<span class=code-line>73|Sim|Test</span>
</pre></div><p>To publish the first comment:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>UPDATE</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>SET</span> <span class=k>mode</span><span class=o>=</span><span class=mi>1</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>72</span><span class=p>;</span></span>
</pre></div><p>To publish all the comments waiting for approval:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>UPDATE</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>SET</span> <span class=k>mode</span><span class=o>=</span><span class=mi>1</span> <span class=k>WHERE</span> <span class=k>mode</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span></span>
</pre></div><p>To delete all the comments waiting for approval:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=k>mode</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span></span>
</pre></div><h2 id=ex-3-delete-and-update-threads><a class=toclink href=#ex-3-delete-and-update-threads>Ex 3: Delete And Update Threads</a></h2><p>To check the threads:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span><span class=p>;</span></span>
</pre></div><p>Take a glimpse of a part of them:<div class=highlight><pre><span class=code-line><span></span>id|uri|title</span>
<span class=code-line>1|/terminal/2016/07/12/start-to-use-isso/|Tried ISSO and......</span>
<span class=code-line>7|/terminal/2016/05/27/make-full-use-of-cloudflare/|Make full use of CloudFlare</span>
<span class=code-line>9|/browser/2016/06/04/panic-at-the-disco-bohemian-rhapsody/|Panic! At The Disco - Bohemian Rhapsody</span>
</pre></div><p>To delete the first thread:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span></span>
</pre></div><p>To delete the comments to the first thread:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>WHERE</span> <span class=n>tid</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span></span>
</pre></div><p>To move the comments of the first thread to the second one:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>UPDATE</span> <span class=n>isso</span><span class=p>.</span><span class=n>comments</span> <span class=k>SET</span> <span class=n>tid</span><span class=o>=</span><span class=mi>7</span> <span class=k>WHERE</span> <span class=n>tid</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span></span>
</pre></div><p>To check all the threads whose url start with <code>/terminal</code>:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span> <span class=k>WHERE</span> <span class=n>uri</span> <span class=k>LIKE</span> <span class=s1>&#39;/terminal%&#39;</span><span class=p>;</span></span>
</pre></div><p>To delete all the threads whose url start with <code>/terminal</code>:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>DELETE</span> <span class=k>FROM</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span> <span class=k>WHERE</span> <span class=n>uri</span> <span class=k>LIKE</span> <span class=s1>&#39;/terminal%&#39;</span><span class=p>;</span></span>
</pre></div><p>To edit the url the third thread is shown on:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>UPDATE</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span> <span class=k>SET</span> <span class=n>uri</span><span class=o>=</span><span class=s1>&#39;/the/path/to/it/&#39;</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>9</span><span class=p>;</span></span>
</pre></div><p>To edit the third thread's title:<div class=highlight><pre><span class=code-line><span></span><span class=gp>sqlite&gt; </span><span class=k>UPDATE</span> <span class=n>isso</span><span class=p>.</span><span class=n>threads</span> <span class=k>SET</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;The new title&#39;</span> <span class=k>WHERE</span> <span class=n>id</span><span class=o>=</span><span class=mi>9</span><span class=p>;</span></span>
</pre></div><div class=footnote><hr><ol><li id=fn:1><p><a href=https://www.tutorialspoint.com/sqlite/index.htm target=_blank>SQLite Tutorial - tutorialspoint</a>&#160;<a class=footnote-backref href=#fnref:1 rev=footnote title="Jump back to footnote 1 in the text">&#8617;</a></ol></div></div></article><article id=m><div id=n><section id=comments data-title="Inside The Isso Database" data-isso-id=/my-isso-style/sql/></section></div></article></main></div><footer id=g><div id=l>Simputer Archives &#169; 2016 - 2019 (<a href=https://snorl.ax/>Click to view Current Version of Simputer</a>) • Licensed under <a target=_blank rel=license href=http://creativecommons.org/licenses/by/3.0/>CC BY 3.0</a><br>Made using <a href=http://getpelican.com/ target=_blank>Pelican</a> • Design from <a href=https://wordpress.org/themes/twentyfifteen/ target=_blank>TwentyFifteen</a></div></footer><script data-isso=https://isso.snorl.ax/ data-isso-gravatar=true data-isso-avatar=false data-isso-reply-notifications=true data-isso-reply-to-self=true data-isso-css=false src=https://archives.snorl.ax/theme/js/isso_embed.min.js data-isso-lang=en></script>