<!doctype html><html lang=en><title>The Flask Mega-Tutorial Rereading - Part 2 - Terminal In A Simputer Archives</title><meta charset=utf-8><link rel=canonical href=https://archives.snorl.ax/terminal/2019/06/19/the-flask-mega-tutorial-rereading-part-2/><link href=https://archives.snorl.ax/theme/css/all.css rel=stylesheet><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Luckiest+Guy|Rajdhani:600|Rajdhani:700&amp;display=swap"><link href=https://archives.snorl.ax/theme/images/icon.png rel=icon><link href=https://archives.snorl.ax/theme/images/icon-apple.png rel=apple-touch-icon-precomposed><link href=https://archives.snorl.ax/feeds/terminal.xml rel=alternate title="Simputer Archives Terminal RSS Feed" type=application/rss+xml><meta content=python name=tags><meta content=flask name=tags><meta content=learning notes name=tags><meta content="width=device-width" name=viewport><meta name=twitter:card content=summary><meta name=twitter:image content=https://archives.snorl.ax/theme/images/usual-twitter.png><meta name=twitter:site content=@Snorl_ax><meta name=twitter:title content="The Flask Mega-Tutorial Rereading - Part 2"><meta name=twitter:description content="Part 2 of the re-reading."><div id=a><header id=c><div id=d><h1 id=e><a href=https://archives.snorl.ax/>Simputer Archives</a></h1></div></header><div id=f><nav id=h><ul><li><a href=https://archives.snorl.ax/>Home</a><li><a href=https://archives.snorl.ax/browser/>Browser</a><li id=i><a href=https://archives.snorl.ax/terminal/>Terminal</a><li><a href=https://archives.snorl.ax/tags/>Tags</a></ul></nav><nav id=r><a href=https://www.youtube.com/channel/UCnqOLMtPJaqa7e_6FhZ8-rw title=Youtube><svg id="youtube"/></a><a href=https://github.com/SnorlaxYum/ title=Github><svg id="github"/></a><a href=https://twitter.com/Snorl_ax title=Twitter><svg id="twitter"/></a><a href=https://archives.snorl.ax/feeds/terminal.xml title="Terminal RSS"><svg id="rss"/></a><a href=mailto:sim@snorl.ax title=Email><svg id="mail"/></a></nav><aside id=j><form action=https://archives.snorl.ax/search.html onsubmit="return validateForm(this.elements['q'].value);"><input placeholder=Search... name=q id=tipue_search_input></form></aside></div></div><div id=b><main id=k><article id=m><header id=o><h2 id=p>The Flask Mega-Tutorial Rereading - Part 2</h2></header><div id=n><div id=series><p>This post is part 2 of the "The Flask Mega Tutorial" series:<ol class=parts><li><a href=https://archives.snorl.ax/terminal/2019/05/31/running-through-the-flask-mega-tutorial-again/>Running through The Flask Mega-Tutorial Again</a><li id=i><a>The Flask Mega-Tutorial Rereading - Part 2</a><li><a href=https://archives.snorl.ax/terminal/2019/08/27/the-flask-mega-tutorial-rereading-part-3-one-to-many-model/>The Flask Mega-Tutorial Rereading - Part 3 - One-To-Many Model</a></ol></div><h2 id=toc>Table Of Contents</h2><div class=toc><ul><li><a href=#chapter-7-error-handling>Chapter 7: Error Handling</a><ul><li><a href=#debug-mode>Debug Mode</a><li><a href=#custom-error-pages>Custom Error Pages</a><li><a href=#sending-errors-by-email>Sending Errors by Email</a><ul><li><a href=#testing-approach-1-dubuggingserver-in-python>Testing Approach 1: DubuggingServer in python</a><li><a href=#testing-approach-2-real-email-server>Testing Approach 2: Real Email Server</a></ul><li><a href=#logging-to-a-file>Logging to a File</a><li><a href=#fixing-the-duplicate-username-bug>Fixing the Duplicate Username Bug</a></ul></ul></div><p>This tutorial<sup id=fnref:1><a class=footnote-ref href=#fn:1 rel=footnote>1</a></sup> is really amazing and worth my second learning.<h2 id=chapter-7-error-handling><a class=toclink href=#chapter-7-error-handling>Chapter 7: Error Handling</a></h2><h3 id=debug-mode><a class=toclink href=#debug-mode>Debug Mode</a></h3><div class=highlight><pre><span class=code-line><span></span>$ <span class=nb>export</span> <span class=nv>FLASK_DEBUG</span><span class=o>=</span><span class=m>1</span></span>
<span class=code-line>$ flask run</span>
</pre></div><p>The browser allows you to see the error in detail.<h3 id=custom-error-pages><a class=toclink href=#custom-error-pages>Custom Error Pages</a></h3><p>Use the decorator <code>@app.errorhandler</code>.<p><code>app/errors.py</code> - Custom error handlers<div class=highlight><pre><span class=code-line><span></span><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>render_template</span></span>
<span class=code-line><span class=kn>from</span> <span class=nn>app</span> <span class=kn>import</span> <span class=n>app</span><span class=p>,</span> <span class=n>db</span></span>
<span class=code-line></span>
<span class=code-line><span class=nd>@app.errorhandler</span><span class=p>(</span><span class=mi>404</span><span class=p>)</span></span>
<span class=code-line><span class=k>def</span> <span class=nf>not_found_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span></span>
<span class=code-line>    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;404.html&#39;</span><span class=p>),</span> <span class=mi>404</span></span>
<span class=code-line></span>
<span class=code-line><span class=nd>@app.errorhandler</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span></span>
<span class=code-line><span class=k>def</span> <span class=nf>internal_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span></span>
<span class=code-line>    <span class=n>db</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>rollback</span><span class=p>()</span></span>
<span class=code-line>    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;500.html&#39;</span><span class=p>),</span> <span class=mi>500</span></span>
</pre></div><p><code>app/__init__.py</code> - Import error handlers<div class=highlight><pre><span class=code-line><span></span><span class=c1># ...</span></span>
<span class=code-line></span>
<span class=code-line><span class=kn>from</span> <span class=nn>app</span> <span class=kn>import</span> <span class=n>routes</span><span class=p>,</span> <span class=n>models</span><span class=p>,</span> <span class=n>errors</span></span>
</pre></div><h3 id=sending-errors-by-email><a class=toclink href=#sending-errors-by-email>Sending Errors by Email</a></h3><p><code>config.py</code> - Email configuration<div class=highlight><pre><span class=code-line><span></span><span class=k>class</span> <span class=nc>Config</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span></span>
<span class=code-line>    <span class=c1># ...</span></span>
<span class=code-line>    <span class=n>MAIL_SERVER</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;MAIL_SERVER&#39;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;localhost&quot;</span></span>
<span class=code-line>    <span class=n>MAIL_PORT</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;MAIL_PORT&#39;</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>25</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>MAIL_USE_TLS</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;MAIL_USE_TLS&#39;</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>None</span></span>
<span class=code-line>    <span class=n>MAIL_USERNAME</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;MAIL_USERNAME&#39;</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>MAIL_PASSWORD</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;MAIL_PASSWORD&#39;</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>ADMINS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;your-email@example.com&#39;</span><span class=p>]</span></span>
</pre></div><p><code>app/__init__.py</code> - Log errors by email<div class=highlight><pre><span class=code-line><span></span><span class=kn>import</span> <span class=nn>logging</span></span>
<span class=code-line><span class=kn>from</span> <span class=nn>logging.handlers</span> <span class=kn>import</span> <span class=n>SMTPHandler</span></span>
<span class=code-line></span>
<span class=code-line><span class=c1># ...</span></span>
<span class=code-line></span>
<span class=code-line><span class=k>if</span> <span class=ow>not</span> <span class=n>app</span><span class=o>.</span><span class=n>debug</span><span class=p>:</span></span>
<span class=code-line>    <span class=k>if</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_SERVER&#39;</span><span class=p>]:</span></span>
<span class=code-line>        <span class=n>auth</span> <span class=o>=</span> <span class=bp>None</span></span>
<span class=code-line>        <span class=k>if</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_USERNAME&#39;</span><span class=p>]</span> <span class=ow>or</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_PASSWORD&#39;</span><span class=p>]:</span></span>
<span class=code-line>            <span class=n>auth</span> <span class=o>=</span> <span class=p>(</span><span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_USERNAME&#39;</span><span class=p>],</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_PASSWORD&#39;</span><span class=p>])</span></span>
<span class=code-line>        <span class=n>secure</span> <span class=o>=</span> <span class=bp>None</span></span>
<span class=code-line>        <span class=k>if</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_USE_TLS&#39;</span><span class=p>]:</span></span>
<span class=code-line>            <span class=n>secure</span> <span class=o>=</span> <span class=p>()</span></span>
<span class=code-line>        <span class=n>mail_handler</span> <span class=o>=</span> <span class=n>SMTPHandler</span><span class=p>(</span></span>
<span class=code-line>            <span class=n>mailhost</span><span class=o>=</span><span class=p>(</span><span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_SERVER&#39;</span><span class=p>],</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_PORT&#39;</span><span class=p>]),</span></span>
<span class=code-line>            <span class=n>fromaddr</span><span class=o>=</span><span class=s1>&#39;no-reply@&#39;</span> <span class=o>+</span> <span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;MAIL_SERVER&#39;</span><span class=p>],</span></span>
<span class=code-line>            <span class=n>toaddrs</span><span class=o>=</span><span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;ADMINS&#39;</span><span class=p>],</span> <span class=n>subject</span><span class=o>=</span><span class=s1>&#39;Microblog Failure&#39;</span><span class=p>,</span></span>
<span class=code-line>            <span class=n>credentials</span><span class=o>=</span><span class=n>auth</span><span class=p>,</span> <span class=n>secure</span><span class=o>=</span><span class=n>secure</span><span class=p>)</span></span>
<span class=code-line>        <span class=n>mail_handler</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span></span>
<span class=code-line>        <span class=n>app</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>mail_handler</span><span class=p>)</span></span>
</pre></div><h4 id=testing-approach-1-dubuggingserver-in-python><a class=toclink href=#testing-approach-1-dubuggingserver-in-python>Testing Approach 1: DubuggingServer in python</a></h4><p>This is a fake email server that accepts emails, but instead of sending them, it prints them to the console. To run this server, open a second terminal session and run the following command on it:<div class=highlight><pre><span class=code-line><span></span>(venv) $ python -m smtpd -n -c DebuggingServer localhost:8025</span>
</pre></div><p>Then <code>export MAIL_PORT=8025</code> before <code>flask run</code>.<h4 id=testing-approach-2-real-email-server><a class=toclink href=#testing-approach-2-real-email-server>Testing Approach 2: Real Email Server</a></h4><div class=highlight><pre><span class=code-line><span></span>export MAIL_SERVER=smtp.googlemail.com</span>
<span class=code-line>export MAIL_PORT=587</span>
<span class=code-line>export MAIL_USE_TLS=1</span>
<span class=code-line>export MAIL_USERNAME=&lt;your-gmail-username&gt;</span>
<span class=code-line>export MAIL_PASSWORD=&lt;your-gmail-password&gt;</span>
</pre></div><h3 id=logging-to-a-file><a class=toclink href=#logging-to-a-file>Logging to a File</a></h3><p><code>app/__init__.py</code> - Logging to a file<div class=highlight><pre><span class=code-line><span></span><span class=c1># ...</span></span>
<span class=code-line><span class=kn>from</span> <span class=nn>logging.handlers</span> <span class=kn>import</span> <span class=n>RotatingFileHandler</span></span>
<span class=code-line><span class=kn>import</span> <span class=nn>os</span></span>
<span class=code-line></span>
<span class=code-line><span class=c1># ...</span></span>
<span class=code-line></span>
<span class=code-line><span class=k>if</span> <span class=ow>not</span> <span class=n>app</span><span class=o>.</span><span class=n>debug</span><span class=p>:</span></span>
<span class=code-line>    <span class=c1># ...</span></span>
<span class=code-line></span>
<span class=code-line>    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=s1>&#39;logs&#39;</span><span class=p>):</span></span>
<span class=code-line>        <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=s1>&#39;logs&#39;</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>file_handler</span> <span class=o>=</span> <span class=n>RotatingFileHandler</span><span class=p>(</span><span class=s1>&#39;logs/microblog.log&#39;</span><span class=p>,</span> <span class=n>maxBytes</span><span class=o>=</span><span class=mi>10240</span><span class=p>,</span></span>
<span class=code-line>                                       <span class=n>backupCount</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span></span>
<span class=code-line>        <span class=s1>&#39;</span><span class=si>%(asctime)s</span><span class=s1> </span><span class=si>%(levelname)s</span><span class=s1>: </span><span class=si>%(message)s</span><span class=s1> [in </span><span class=si>%(pathname)s</span><span class=s1>:</span><span class=si>%(lineno)d</span><span class=s1>]&#39;</span><span class=p>))</span></span>
<span class=code-line>    <span class=n>file_handler</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>app</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span></span>
<span class=code-line></span>
<span class=code-line>    <span class=n>app</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span></span>
<span class=code-line>    <span class=n>app</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>&#39;Microblog startup&#39;</span><span class=p>)</span></span>
</pre></div><h3 id=fixing-the-duplicate-username-bug><a class=toclink href=#fixing-the-duplicate-username-bug>Fixing the Duplicate Username Bug</a></h3><p><code>app/forms.py</code> - Validate username in edit profile form.<div class=highlight><pre><span class=code-line><span></span><span class=k>class</span> <span class=nc>EditProfileForm</span><span class=p>(</span><span class=n>FlaskForm</span><span class=p>):</span></span>
<span class=code-line>    <span class=n>username</span> <span class=o>=</span> <span class=n>StringField</span><span class=p>(</span><span class=s1>&#39;Username&#39;</span><span class=p>,</span> <span class=n>validators</span><span class=o>=</span><span class=p>[</span><span class=n>DataRequired</span><span class=p>()])</span></span>
<span class=code-line>    <span class=n>about_me</span> <span class=o>=</span> <span class=n>TextAreaField</span><span class=p>(</span><span class=s1>&#39;About me&#39;</span><span class=p>,</span> <span class=n>validators</span><span class=o>=</span><span class=p>[</span><span class=n>Length</span><span class=p>(</span><span class=nb>min</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=nb>max</span><span class=o>=</span><span class=mi>140</span><span class=p>)])</span></span>
<span class=code-line>    <span class=n>submit</span> <span class=o>=</span> <span class=n>SubmitField</span><span class=p>(</span><span class=s1>&#39;Submit&#39;</span><span class=p>)</span></span>
<span class=code-line></span>
<span class=code-line>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>original_username</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span></span>
<span class=code-line>        <span class=nb>super</span><span class=p>(</span><span class=n>EditProfileForm</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></span>
<span class=code-line>        <span class=bp>self</span><span class=o>.</span><span class=n>original_username</span> <span class=o>=</span> <span class=n>original_username</span></span>
<span class=code-line></span>
<span class=code-line>    <span class=k>def</span> <span class=nf>validate_username</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>username</span><span class=p>):</span></span>
<span class=code-line>        <span class=k>if</span> <span class=n>username</span><span class=o>.</span><span class=n>data</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>original_username</span><span class=p>:</span></span>
<span class=code-line>            <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>query</span><span class=o>.</span><span class=n>filter_by</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>username</span><span class=o>.</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span></span>
<span class=code-line>            <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>None</span><span class=p>:</span></span>
<span class=code-line>                <span class=k>raise</span> <span class=n>ValidationError</span><span class=p>(</span><span class=s1>&#39;Please use a different username.&#39;</span><span class=p>)</span></span>
</pre></div><p><code>app/routes.py</code> - Validate username in edit profile form.<div class=highlight><pre><span class=code-line><span></span><span class=o>...</span></span>
<span class=code-line><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/edit_profile&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;POST&#39;</span><span class=p>])</span></span>
<span class=code-line><span class=nd>@login_required</span></span>
<span class=code-line><span class=k>def</span> <span class=nf>edit_profile</span><span class=p>():</span></span>
<span class=code-line>    <span class=n>form</span> <span class=o>=</span> <span class=n>EditProfileForm</span><span class=p>(</span><span class=n>current_user</span><span class=o>.</span><span class=n>username</span><span class=p>)</span></span>
<span class=code-line>    <span class=c1># ...</span></span>
</pre></div><div class=footnote><hr><ol><li id=fn:1><p><a href=https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world/page/0>The Flask Mega-Tutorial Part I: Hello, World! - miguelgrinberg.com</a>&#160;<a class=footnote-backref href=#fnref:1 rev=footnote title="Jump back to footnote 1 in the text">&#8617;</a></ol></div></div><footer id=q><svg id="publish"/><b>Created:&nbsp;</b><time datetime=2019-06-19T22:16:00+02:00>June 19, 2019</time><span id=y>•</span><svg id="session"/></svg>In a <a href=https://archives.snorl.ax/terminal/ rel="category tag"><b>Terminal</b></a> Session<span id=y>•</span><svg id="tags"/><b>Tags:&nbsp;</b><a href=https://archives.snorl.ax/tags/python/ rel=tag>python</a>,&nbsp;<a href=https://archives.snorl.ax/tags/flask/ rel=tag>flask</a>,&nbsp;<a href=https://archives.snorl.ax/tags/learning-notes/ rel=tag>learning notes</a></footer></article><article id=m><div id=n><section id=comments data-title="The Flask Mega-Tutorial Rereading - Part 2" data-isso-id=/terminal/2019/06/19/the-flask-mega-tutorial-rereading-part-2/></section></div></article></main></div><footer id=g><div id=l>Simputer Archives &#169; 2016 - 2019 (<a href=https://snorl.ax/>Click to view Current Version of Simputer</a>) • Licensed under <a target=_blank rel=license href=http://creativecommons.org/licenses/by/3.0/>CC BY 3.0</a><br>Made using <a href=http://getpelican.com/ target=_blank>Pelican</a> • Design from <a href=https://wordpress.org/themes/twentyfifteen/ target=_blank>TwentyFifteen</a></div></footer><script data-isso=https://isso.snorl.ax/ data-isso-gravatar=true data-isso-avatar=false data-isso-reply-notifications=true data-isso-reply-to-self=true data-isso-css=false src=https://archives.snorl.ax/theme/js/isso_embed.min.js data-isso-lang=en></script>